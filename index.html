<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcio Ramos - Im√≥veis</title>
   <!-- NO HEAD (antes de qualquer script seu) -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  // Configura√ß√£o INFAL√çVEL (coloque SUAS chaves)
  window.supabase = supabase.createClient(
    'https://jlhgivihswqwdovvnfpn.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsaGdpdmloc3dxd2RvdnZuZnBuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NTYzNzYsImV4cCI6MjA3MDUzMjM3Nn0.sdOnVQWruUk2EUq9RyaQmCdlphkFtIPtNDA8Ft1QcUI'
  );
</script>
    
    <!-- Meta Pixel (Facebook) -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'SEU_PIXEL_ID_AQUI');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=SEU_PIXEL_ID_AQUI&ev=PageView&noscript=1"
    /></noscript>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXXXXX');</script>
    <style>
        .property-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .gallery-image {
            transition: transform 0.3s ease;
        }
        .gallery-image:hover {
            transform: scale(1.05);
        }
        .modal {
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- WhatsApp Floating Button -->
    <div id="whatsappButton" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50">
        <a href="https://wa.me/5511999999999?text=Ol√°! Vi um im√≥vel no site e gostaria de mais informa√ß√µes." 
           target="_blank" 
           onclick="trackWhatsAppClick()"
           class="bg-green-500 hover:bg-green-600 text-white rounded-full p-3 sm:p-4 shadow-lg transition-all duration-300 hover:scale-110 flex items-center justify-center">
            <svg class="w-6 h-6 sm:w-8 sm:h-8" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
            </svg>
        </a>
    </div>
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 lg:w-12 lg:h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-xl lg:text-2xl">üè†</span>
                    </div>
                    <h1 class="text-xl lg:text-3xl font-bold text-gray-800">Im√≥velPro</h1>
                </div>
                <nav class="hidden md:flex space-x-6 lg:space-x-8">
                    <button onclick="showSection('home')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">In√≠cio</button>
                    <button onclick="showSection('casas')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">Casas</button>
                    <button onclick="showSection('apartamentos')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">Apartamentos</button>
                    <button onclick="showSection('comercial')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">Comercial</button>
                    <button onclick="showSection('aluguel')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">Aluguel</button>
                    <button onclick="showSection('venda')" class="nav-btn text-gray-700 hover:text-blue-600 font-medium transition-colors text-base lg:text-lg px-2 py-1">Venda</button>
                    <button onclick="showSection('admin')" class="bg-blue-600 text-white px-4 py-2 lg:px-6 lg:py-3 rounded-lg hover:bg-blue-700 transition-colors text-base lg:text-lg font-medium">Corretor</button>
                </nav>
                <button onclick="toggleMobileMenu()" class="md:hidden text-gray-700 p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 pb-4 border-t border-gray-200 pt-4">
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="showSection('home')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">In√≠cio</button>
                    <button onclick="showSection('casas')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">Casas</button>
                    <button onclick="showSection('apartamentos')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">Apartamentos</button>
                    <button onclick="showSection('comercial')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">Comercial</button>
                    <button onclick="showSection('aluguel')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">Aluguel</button>
                    <button onclick="showSection('venda')" class="text-center py-4 px-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-base font-medium">Venda</button>
                </div>
                <button onclick="showSection('admin')" class="w-full mt-4 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-base font-medium">Painel Corretor</button>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <section id="home" class="section-content">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-blue-800 to-blue-900 text-white py-12 sm:py-16 lg:py-20">
            <div class="container mx-auto px-4">
                <div class="text-left max-w-4xl">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 leading-tight">Encontre o Lugar dos Sonhos para Morar!</h2>
                    <p class="text-base sm:text-lg lg:text-xl mb-6 sm:mb-8 opacity-90">A melhor sele√ß√£o de casas, apartamentos e salas comerciais da regi√£o. Realizamos o seu sonho da casa pr√≥pria com seguran√ßa e transpar√™ncia.</p>
                    <div class="flex flex-col sm:flex-row gap-4 sm:gap-6">
                        <button onclick="showSection('casas')" class="bg-white text-blue-800 px-8 sm:px-10 py-4 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-base sm:text-lg">Ver Casas</button>
                        <button onclick="showSection('apartamentos')" class="bg-transparent border-2 border-white text-white px-8 sm:px-10 py-4 rounded-lg font-semibold hover:bg-white hover:text-blue-800 transition-colors text-base sm:text-lg">Ver Apartamentos</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Featured Properties -->
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h3 class="text-2xl sm:text-3xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Im√≥veis em Destaque</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="featuredProperties">
                <!-- Properties will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Properties Sections -->
    <section id="casas" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Casas Dispon√≠veis</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="casasGrid">
                <!-- Casa properties will be loaded here -->
            </div>
        </div>
    </section>

    <section id="apartamentos" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Apartamentos Dispon√≠veis</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="apartamentosGrid">
                <!-- Apartamento properties will be loaded here -->
            </div>
        </div>
    </section>

    <section id="comercial" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Salas Comerciais</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="comercialGrid">
                <!-- Comercial properties will be loaded here -->
            </div>
        </div>
    </section>

    <section id="aluguel" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Im√≥veis para Aluguel</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="aluguelGrid">
                <!-- Aluguel properties will be loaded here -->
            </div>
        </div>
    </section>

    <section id="venda" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-center mb-8 sm:mb-12 text-gray-800">Im√≥veis para Venda</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8" id="vendaGrid">
                <!-- Venda properties will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin" class="section-content hidden">
        <div class="container mx-auto px-4 py-8 sm:py-12 lg:py-16">
            <!-- Login Form -->
            <div id="adminLogin" class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">üîê Acesso Exclusivo do Corretor</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="adminEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" placeholder="seu@email.com" required>
                    </div>
                    
                    <button onclick="sendMagicLink()" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors text-base">
                        Enviar Link de Acesso
                    </button>
                    
                    <div id="loginMessage" class="hidden mt-4 p-3 rounded-lg"></div>
                </div>
            </div>

            <!-- Admin Panel Content (Hidden until login) -->
            <div id="adminContent" class="hidden">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800">Painel do Corretor</h2>
                    <button onclick="logoutAdmin()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium">
                        üö™ Sair
                    </button>
                </div>
                
                <!-- Add Property Form -->
                <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-4 sm:p-6 lg:p-8">
                <h3 class="text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-gray-800">Adicionar Novo Im√≥vel</h3>
                <form id="propertyForm" class="space-y-4 sm:space-y-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">T√≠tulo</label>
                            <input type="text" id="title" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pre√ßo</label>
                            <input type="text" id="price" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" placeholder="R$ 350.000" required>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tipo</label>
                            <select id="type" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required>
                                <option value="">Selecione o tipo</option>
                                <option value="casa">Casa</option>
                                <option value="apartamento">Apartamento</option>
                                <option value="comercial">Sala Comercial</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Transa√ß√£o</label>
                            <select id="transaction" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required>
                                <option value="">Selecione</option>
                                <option value="venda">Venda</option>
                                <option value="aluguel">Aluguel</option>
                            </select>
                        </div>
                        <div class="sm:col-span-2 lg:col-span-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">√Årea (m¬≤)</label>
                            <input type="number" id="area" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4 sm:gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quartos</label>
                            <input type="number" id="bedrooms" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Banheiros</label>
                            <input type="number" id="bathrooms" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Vagas</label>
                            <input type="number" id="parking" class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                    </div>

                    <!-- Personaliza√ß√£o de √çcones e Textos -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="text-lg font-semibold mb-4 text-gray-800">üé® Personalizar √çcones e Textos</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">√çcone Quartos</label>
                                <input type="text" id="bedroomIcon" value="üõèÔ∏è" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-lg">
                                <input type="text" id="bedroomText" value="Quartos" placeholder="Texto para quartos" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mt-2 text-sm">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">√çcone Banheiros</label>
                                <input type="text" id="bathroomIcon" value="üöø" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-lg">
                                <input type="text" id="bathroomText" value="Banheiros" placeholder="Texto para banheiros" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mt-2 text-sm">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">√çcone Vagas</label>
                                <input type="text" id="parkingIcon" value="üöó" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-lg">
                                <input type="text" id="parkingText" value="Vagas" placeholder="Texto para vagas" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mt-2 text-sm">
                            </div>
                        </div>
                        <div class="mt-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">√çcone √Årea</label>
                                <input type="text" id="areaIcon" value="üìê" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-lg sm:w-32">
                                <input type="text" id="areaText" value="m¬≤" placeholder="Texto para √°rea" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 mt-2 text-sm sm:w-32">
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-3">üí° Dica: Voc√™ pode usar emojis ou s√≠mbolos como √≠cones. Exemplos: üè† üõèÔ∏è üöø üöó üìê üè¢ üåü</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Endere√ßo</label>
                        <input type="text" id="address" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Descri√ß√£o</label>
                        <textarea id="description" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base" required></textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Foto Principal (Thumbnail)</label>
                        <input type="file" id="thumbnail" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        <p class="text-sm text-gray-500 mt-1">Esta ser√° a foto de capa do im√≥vel</p>
                        <div id="thumbnailPreview" class="mt-2"></div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fotos Adicionais (at√© 10 imagens)</label>
                        <div class="space-y-3">
                            <input type="file" id="photos" multiple accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                            <button type="button" onclick="addMorePhotos()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm font-medium">
                                + Adicionar Mais Fotos
                            </button>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">Voc√™ pode selecionar v√°rias fotos de uma vez ou adicionar aos poucos (m√°ximo 10 fotos)</p>
                        <div class="mt-2 p-3 bg-blue-50 rounded-lg">
                            <p class="text-sm text-blue-700">üì∏ <span id="photoCount">0</span>/10 fotos adicionadas</p>
                        </div>
                        <div id="photoPreview" class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                    </div>

                    <button type="submit" class="w-full bg-blue-600 text-white py-4 px-8 rounded-lg font-semibold hover:bg-blue-700 transition-colors text-lg">
                        Adicionar Im√≥vel
                    </button>
                </form>
            </div>

            <!-- Properties Management -->
            <div class="max-w-4xl mx-auto mt-12">
                <h3 class="text-2xl font-bold mb-6 text-gray-800">Im√≥veis Cadastrados</h3>
                <div id="adminPropertiesList" class="space-y-4">
                    <!-- Admin properties list will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Property Detail Modal -->
    <div id="propertyModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-2 sm:p-4">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-4 sm:p-6">
                <div class="flex justify-between items-start mb-4 sm:mb-6">
                    <h2 id="modalTitle" class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 pr-4 leading-tight"></h2>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl sm:text-3xl flex-shrink-0 p-1">&times;</button>
                </div>
                
                <!-- Photo Gallery -->
                <div id="photoGallery" class="mb-6 sm:mb-8">
                    <div id="mainPhoto" class="mb-3 sm:mb-4">
                        <img id="mainPhotoImg" src="" alt="" class="w-full h-48 sm:h-64 lg:h-96 object-cover rounded-lg">
                    </div>
                    <div id="thumbnails" class="grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-7 gap-1 sm:gap-2">
                        <!-- Thumbnails will be loaded here -->
                    </div>
                </div>

                <!-- Property Details -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8">
                    <div>
                        <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800">Detalhes do Im√≥vel</h3>
                        <div id="propertyDetails" class="space-y-2 sm:space-y-3 text-sm sm:text-base">
                            <!-- Details will be loaded here -->
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800">Descri√ß√£o</h3>
                        <p id="propertyDescription" class="text-gray-600 leading-relaxed text-sm sm:text-base mb-4 sm:mb-6"></p>
                        
                        <div class="p-3 sm:p-4 bg-blue-50 rounded-lg">
                            <h4 class="font-semibold text-blue-800 mb-2 text-sm sm:text-base">Interessado?</h4>
                            <p class="text-blue-600 mb-3 text-sm sm:text-base">Entre em contato conosco para mais informa√ß√µes!</p>
                            <button onclick="trackContactClick()" class="w-full sm:w-auto bg-green-600 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg hover:bg-green-700 transition-colors text-base sm:text-lg font-medium flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                                </svg>
                                WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Property data storage
        let properties = [
            {
                id: 1,
                title: "Casa Moderna em Condom√≠nio",
                price: "R$ 850.000",
                type: "casa",
                transaction: "venda",
                area: 180,
                bedrooms: 3,
                bathrooms: 2,
                parking: 2,
                address: "Rua das Flores, 123 - Jardim Primavera",
                description: "Linda casa moderna em condom√≠nio fechado com √°rea de lazer completa. Acabamentos de primeira qualidade, cozinha planejada, √°rea gourmet e jardim privativo. Localiza√ß√£o privilegiada pr√≥xima a escolas e shopping centers.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e5e7eb'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ECasa - Fachada%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f3f4f6'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala de Estar%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e5e7eb'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ECozinha%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f3f4f6'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EQuarto Principal%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e5e7eb'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3E√Årea Gourmet%3C/text%3E%3C/svg%3E"
                ]
            },
            {
                id: 2,
                title: "Apartamento Luxuoso Centro",
                price: "R$ 650.000",
                type: "apartamento",
                transaction: "venda",
                area: 120,
                bedrooms: 2,
                bathrooms: 2,
                parking: 1,
                address: "Av. Central, 456 - Centro",
                description: "Apartamento de alto padr√£o no centro da cidade com vista panor√¢mica. Totalmente mobiliado, com varanda gourmet, academia e piscina no pr√©dio. Pr√≥ximo a bancos, restaurantes e transporte p√∫blico.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23ddd6fe'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EApartamento - Vista%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e0e7ff'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala Integrada%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23ddd6fe'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EVarianda Gourmet%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e0e7ff'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESu√≠te Master%3C/text%3E%3C/svg%3E"
                ]
            },
            {
                id: 3,
                title: "Sala Comercial Premium",
                price: "R$ 450.000",
                type: "comercial",
                transaction: "venda",
                area: 85,
                bedrooms: 0,
                bathrooms: 2,
                parking: 2,
                address: "Ed. Business Center - Av. Empresarial, 789",
                description: "Sala comercial em edif√≠cio corporativo de alto padr√£o. Ambiente climatizado, recep√ß√£o 24h, estacionamento privativo e localiza√ß√£o estrat√©gica no centro financeiro da cidade.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fef3c7'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala Comercial%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fed7aa'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ERecep√ß√£o%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fef3c7'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala de Reuni√£o%3C/text%3E%3C/svg%3E"
                ]
            },
            {
                id: 4,
                title: "Casa para Aluguel - Residencial",
                price: "R$ 2.800/m√™s",
                type: "casa",
                transaction: "aluguel",
                area: 150,
                bedrooms: 3,
                bathrooms: 2,
                parking: 2,
                address: "Rua Tranquila, 321 - Bairro Residencial",
                description: "Casa confort√°vel para loca√ß√£o em bairro residencial tranquilo. Quintal amplo, garagem coberta e pr√≥xima a escolas e supermercados. Ideal para fam√≠lias.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23dcfce7'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ECasa Aluguel%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23bbf7d0'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EQuintal%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23dcfce7'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala de Estar%3C/text%3E%3C/svg%3E"
                ]
            },
            {
                id: 5,
                title: "Apartamento para Aluguel",
                price: "R$ 1.900/m√™s",
                type: "apartamento",
                transaction: "aluguel",
                area: 75,
                bedrooms: 2,
                bathrooms: 1,
                parking: 1,
                address: "Rua dos Estudantes, 159 - Universit√°rio",
                description: "Apartamento mobiliado pr√≥ximo √† universidade. Ambiente jovem e moderno, com √°rea de lazer no pr√©dio incluindo piscina e churrasqueira.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fce7f3'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EApto Universit√°rio%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fbcfe8'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala Compacta%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23fce7f3'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EQuarto%3C/text%3E%3C/svg%3E"
                ]
            },
            {
                id: 6,
                title: "Sala Comercial para Aluguel",
                price: "R$ 1.200/m√™s",
                type: "comercial",
                transaction: "aluguel",
                area: 45,
                bedrooms: 0,
                bathrooms: 1,
                parking: 1,
                address: "Centro Comercial - Rua do Com√©rcio, 567",
                description: "Sala comercial em centro comercial movimentado. Ideal para escrit√≥rio, consult√≥rio ou pequeno com√©rcio. √ìtima localiza√ß√£o com fluxo constante de pessoas.",
                photos: [
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f0f9ff'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3ESala Comercial%3C/text%3E%3C/svg%3E",
                    "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e0f2fe'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EEspa√ßo Interno%3C/text%3E%3C/svg%3E"
                ]
            }
        ];

        // Navigation functions
        function showSection(sectionName, addToHistory = true) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-blue-600', 'font-bold');
                btn.classList.add('text-gray-700');
            });
            
            // Load properties for the section
            loadPropertiesForSection(sectionName);
            
            // Hide mobile menu
            document.getElementById('mobileMenu').classList.add('hidden');
            
            // Add to browser history
            if (addToHistory) {
                history.pushState({ section: sectionName }, '', `#${sectionName}`);
            }
        }

        // Handle browser back/forward buttons
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.section) {
                showSection(event.state.section, false);
            } else {
                // If no state, go to home
                showSection('home', false);
            }
        });

        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        }

        // Property loading functions
        function loadPropertiesForSection(section) {
            let filteredProperties = [];
            
            switch(section) {
                case 'home':
                    filteredProperties = properties.slice(0, 3); // Featured properties
                    renderProperties(filteredProperties, 'featuredProperties');
                    break;
                case 'casas':
                    filteredProperties = properties.filter(p => p.type === 'casa');
                    renderProperties(filteredProperties, 'casasGrid');
                    break;
                case 'apartamentos':
                    filteredProperties = properties.filter(p => p.type === 'apartamento');
                    renderProperties(filteredProperties, 'apartamentosGrid');
                    break;
                case 'comercial':
                    filteredProperties = properties.filter(p => p.type === 'comercial');
                    renderProperties(filteredProperties, 'comercialGrid');
                    break;
                case 'aluguel':
                    filteredProperties = properties.filter(p => p.transaction === 'aluguel');
                    renderProperties(filteredProperties, 'aluguelGrid');
                    break;
                case 'venda':
                    filteredProperties = properties.filter(p => p.transaction === 'venda');
                    renderProperties(filteredProperties, 'vendaGrid');
                    break;
                case 'admin':
                    checkAdminLogin();
                    break;
            }
        }

        function renderProperties(propertiesToRender, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = propertiesToRender.map(property => {
                // Usar √≠cones e textos personalizados se dispon√≠veis, sen√£o usar padr√£o
                const areaIcon = property.areaIcon || 'üìê';
                const areaText = property.areaText || 'm¬≤';
                const bedroomIcon = property.bedroomIcon || 'üõèÔ∏è';
                const bedroomText = property.bedroomText || '';
                const bathroomIcon = property.bathroomIcon || 'üöø';
                const bathroomText = property.bathroomText || '';
                const parkingIcon = property.parkingIcon || 'üöó';
                const parkingText = property.parkingText || '';
                
                return `
                <div class="property-card bg-white rounded-lg shadow-lg overflow-hidden">
                    <img src="${property.photos[0]}" alt="${property.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2 text-gray-800">${property.title}</h3>
                        <p class="text-2xl font-bold text-blue-600 mb-3">${property.price}</p>
                        <p class="text-gray-600 mb-4">${property.address}</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-4">
                            <span>${areaIcon} ${property.area}${areaText}</span>
                            ${property.bedrooms > 0 ? `<span>${bedroomIcon} ${property.bedrooms} ${bedroomText}</span>` : ''}
                            <span>${bathroomIcon} ${property.bathrooms} ${bathroomText}</span>
                            <span>${parkingIcon} ${property.parking} ${parkingText}</span>
                        </div>
                        <button onclick="showPropertyDetails(${property.id}); trackPropertyView('${property.title}', '${property.type}', '${property.price}')" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors text-base lg:text-lg font-medium">
                            Ver Detalhes
                        </button>
                    </div>
                </div>
                `;
            }).join('');
        }

        // Property details modal
        function showPropertyDetails(propertyId) {
            const property = properties.find(p => p.id === propertyId);
            if (!property) return;

            document.getElementById('modalTitle').textContent = property.title;
            document.getElementById('propertyDescription').textContent = property.description;
            
            // Load main photo
            document.getElementById('mainPhotoImg').src = property.photos[0];
            document.getElementById('mainPhotoImg').alt = property.title;
            
            // Load thumbnails
            const thumbnailsContainer = document.getElementById('thumbnails');
            thumbnailsContainer.innerHTML = property.photos.map((photo, index) => `
                <img src="${photo}" alt="Foto ${index + 1}" 
                     class="w-full h-16 object-cover rounded cursor-pointer gallery-image ${index === 0 ? 'ring-2 ring-blue-500' : ''}"
                     onclick="changeMainPhoto('${photo}', this)">
            `).join('');
            
            // Load property details
            const detailsContainer = document.getElementById('propertyDetails');
            detailsContainer.innerHTML = `
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Pre√ßo:</span>
                    <span class="text-blue-600 font-bold">${property.price}</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Tipo:</span>
                    <span class="capitalize">${property.type}</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Transa√ß√£o:</span>
                    <span class="capitalize">${property.transaction}</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">√Årea:</span>
                    <span>${property.area}m¬≤</span>
                </div>
                ${property.bedrooms > 0 ? `
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Quartos:</span>
                    <span>${property.bedrooms}</span>
                </div>` : ''}
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Banheiros:</span>
                    <span>${property.bathrooms}</span>
                </div>
                <div class="flex justify-between py-2 border-b">
                    <span class="font-medium">Vagas:</span>
                    <span>${property.parking}</span>
                </div>
                <div class="flex justify-between py-2">
                    <span class="font-medium">Endere√ßo:</span>
                    <span class="text-right">${property.address}</span>
                </div>
            `;
            
            document.getElementById('propertyModal').classList.remove('hidden');
        }

        function changeMainPhoto(photoSrc, thumbnail) {
            document.getElementById('mainPhotoImg').src = photoSrc;
            
            // Update thumbnail selection
            document.querySelectorAll('#thumbnails img').forEach(img => {
                img.classList.remove('ring-2', 'ring-blue-500');
            });
            thumbnail.classList.add('ring-2', 'ring-blue-500');
        }

        function closeModal() {
            document.getElementById('propertyModal').classList.add('hidden');
        }

        // Admin login functions
        async function checkAdminLogin() {
            const { data: { session } } = await supabase.auth.getSession();
            
            if (session) {
                showAdminContent();
            } else {
                showAdminLogin();
            }
        }

        function showAdminLogin() {
            document.getElementById('adminLogin').classList.remove('hidden');
            document.getElementById('adminContent').classList.add('hidden');
        }

        function showAdminContent() {
            document.getElementById('adminLogin').classList.add('hidden');
            document.getElementById('adminContent').classList.remove('hidden');
            loadAdminProperties();
        }

        async function logoutAdmin() {
            const { error } = await supabase.auth.signOut();
            if (error) console.error('Error logging out:', error);
            showAdminLogin();
            document.getElementById('propertyForm').reset();
            document.getElementById('photoPreview').innerHTML = '';
            document.getElementById('thumbnailPreview').innerHTML = '';
            currentPhotos = [];
            updatePhotoCount();
        }

        // Fun√ß√£o para enviar o link m√°gico
        async function sendMagicLink() {
            const email = document.getElementById('adminEmail').value;
            const messageDiv = document.getElementById('loginMessage');
            
            if (!email) {
                showMessage(messageDiv, 'Por favor, insira um email v√°lido', 'error');
                return;
            }
            
            try {
                const { error } = await supabase.auth.signInWithOtp({
                    email: email,
                    options: {
                        emailRedirectTo: window.location.href.split('#')[0] + '#admin'
                    }
                });
                
                if (error) throw error;
                
                showMessage(messageDiv, '‚úî Link enviado! Verifique seu email.', 'success');
            } catch (error) {
                showMessage(messageDiv, 'Erro: ' + error.message, 'error');
            }
        }

        function showMessage(element, message, type) {
            element.textContent = message;
            element.className = 'mt-4 p-3 rounded-lg ' + 
                (type === 'error' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700');
            element.classList.remove('hidden');
        }

        // Vari√°vel global para armazenar fotos
        let currentPhotos = [];

        // Thumbnail preview for admin form
        document.getElementById('thumbnail').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const previewContainer = document.getElementById('thumbnailPreview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewContainer.innerHTML = `
                        <div class="mt-2">
                            <img src="${e.target.result}" alt="Thumbnail Preview" class="w-32 h-24 object-cover rounded-lg border-2 border-blue-300">
                            <p class="text-sm text-green-600 mt-1">‚úì Foto principal carregada</p>
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            } else {
                previewContainer.innerHTML = '';
            }
        });

        // Fun√ß√£o para adicionar mais fotos
        function addMorePhotos() {
            if (currentPhotos.length >= 10) {
                alert('M√°ximo de 10 fotos atingido!');
                return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.accept = 'image/*';
            input.style.display = 'none';
            
            input.addEventListener('change', function(e) {
                const files = Array.from(e.target.files);
                const remainingSlots = 10 - currentPhotos.length;
                const filesToProcess = files.slice(0, remainingSlots);
                
                if (files.length > remainingSlots) {
                    alert(`S√≥ √© poss√≠vel adicionar mais ${remainingSlots} fotos. ${files.length - remainingSlots} fotos foram ignoradas.`);
                }
                
                filesToProcess.forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        currentPhotos.push(e.target.result);
                        updatePhotoPreview();
                        updatePhotoCount();
                    };
                    reader.readAsDataURL(file);
                });
            });
            
            document.body.appendChild(input);
            input.click();
            document.body.removeChild(input);
        }

        // Fun√ß√£o para atualizar preview das fotos
        function updatePhotoPreview() {
            const previewContainer = document.getElementById('photoPreview');
            previewContainer.innerHTML = '';
            
            currentPhotos.forEach((photo, index) => {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'relative';
                photoDiv.innerHTML = `
                    <img src="${photo}" alt="Foto ${index + 1}" class="w-full h-24 object-cover rounded-lg">
                    <button type="button" onclick="removePhoto(${index})" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">√ó</button>
                `;
                previewContainer.appendChild(photoDiv);
            });
        }

        // Fun√ß√£o para remover foto
        function removePhoto(index) {
            currentPhotos.splice(index, 1);
            updatePhotoPreview();
            updatePhotoCount();
        }

        // Fun√ß√£o para atualizar contador de fotos
        function updatePhotoCount() {
            document.getElementById('photoCount').textContent = currentPhotos.length;
        }

        // Additional photos preview for admin form
        document.getElementById('photos').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const remainingSlots = 10 - currentPhotos.length;
            const filesToProcess = files.slice(0, remainingSlots);
            
            if (files.length > remainingSlots) {
                alert(`S√≥ √© poss√≠vel adicionar mais ${remainingSlots} fotos. ${files.length - remainingSlots} fotos foram ignoradas.`);
            }
            
            filesToProcess.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentPhotos.push(e.target.result);
                    updatePhotoPreview();
                    updatePhotoCount();
                };
                reader.readAsDataURL(file);
            });
            
            // Limpar o input para permitir adicionar as mesmas fotos novamente se necess√°rio
            this.value = '';
        });

        // Property form submission
        document.getElementById('propertyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const isEditing = this.dataset.editing;
            const thumbnailFile = document.getElementById('thumbnail').files[0];
            
            // Create property object
            const propertyData = {
                title: document.getElementById('title').value,
                price: document.getElementById('price').value,
                type: document.getElementById('type').value,
                transaction: document.getElementById('transaction').value,
                area: parseInt(document.getElementById('area').value),
                bedrooms: parseInt(document.getElementById('bedrooms').value) || 0,
                bathrooms: parseInt(document.getElementById('bathrooms').value) || 0,
                parking: parseInt(document.getElementById('parking').value) || 0,
                address: document.getElementById('address').value,
                description: document.getElementById('description').value,
                // Salvar √≠cones e textos personalizados
                areaIcon: document.getElementById('areaIcon').value || 'üìê',
                areaText: document.getElementById('areaText').value || 'm¬≤',
                bedroomIcon: document.getElementById('bedroomIcon').value || 'üõèÔ∏è',
                bedroomText: document.getElementById('bedroomText').value || '',
                bathroomIcon: document.getElementById('bathroomIcon').value || 'üöø',
                bathroomText: document.getElementById('bathroomText').value || '',
                parkingIcon: document.getElementById('parkingIcon').value || 'üöó',
                parkingText: document.getElementById('parkingText').value || '',
                photos: []
            };
            
            // Process thumbnail first
            if (thumbnailFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Adicionar thumbnail como primeira foto
                    propertyData.photos = [e.target.result, ...currentPhotos];
                    finishPropertySubmission();
                };
                reader.readAsDataURL(thumbnailFile);
            } else {
                // Se n√£o h√° thumbnail novo, usar as fotos existentes
                if (currentPhotos.length > 0) {
                    propertyData.photos = [...currentPhotos];
                } else {
                    // Placeholder se n√£o h√° fotos
                    propertyData.photos = [
                        "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23e5e7eb'/%3E%3Ctext x='200' y='150' text-anchor='middle' fill='%236b7280' font-size='16'%3EIm√≥vel sem foto%3C/text%3E%3C/svg%3E"
                    ];
                }
                finishPropertySubmission();
            }
            
            function finishPropertySubmission() {
                if (isEditing) {
                    // Atualizar im√≥vel existente
                    const propertyIndex = properties.findIndex(p => p.id == isEditing);
                    if (propertyIndex !== -1) {
                        propertyData.id = parseInt(isEditing);
                        properties[propertyIndex] = propertyData;
                        alert('Im√≥vel atualizado com sucesso!');
                    }
                    
                    // Resetar modo de edi√ß√£o
                    delete document.getElementById('propertyForm').dataset.editing;
                    const submitBtn = document.querySelector('#propertyForm button[type="submit"]');
                    submitBtn.textContent = 'Adicionar Im√≥vel';
                    submitBtn.className = 'w-full bg-blue-600 text-white py-4 px-8 rounded-lg font-semibold hover:bg-blue-700 transition-colors text-lg';
                } else {
                    // Adicionar novo im√≥vel
                    propertyData.id = properties.length > 0 ? Math.max(...properties.map(p => p.id)) + 1 : 1;
                    properties.push(propertyData);
                    
                    // Track conversion events
                    if (typeof fbq !== 'undefined') {
                        fbq('track', 'Lead', {
                            content_name: propertyData.title,
                            content_category: propertyData.type,
                            value: parseFloat(propertyData.price.replace(/[^\d,]/g, '').replace(',', '.')),
                            currency: 'BRL'
                        });
                    }
                    
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'property_added', {
                            'event_category': 'real_estate',
                            'event_label': propertyData.type,
                            'value': parseFloat(propertyData.price.replace(/[^\d,]/g, '').replace(',', '.'))
                        });
                    }
                    
                    alert('Im√≥vel adicionado com sucesso!');
                }
                
                // Limpar formul√°rio
                document.getElementById('propertyForm').reset();
                document.getElementById('photoPreview').innerHTML = '';
                document.getElementById('thumbnailPreview').innerHTML = '';
                currentPhotos = [];
                updatePhotoCount();
                loadAdminProperties();
            }
        });

        function loadAdminProperties() {
            const container = document.getElementById('adminPropertiesList');
            container.innerHTML = properties.map(property => `
                <div class="bg-white rounded-lg shadow p-6 flex justify-between items-center">
                    <div>
                        <h4 class="font-bold text-lg">${property.title}</h4>
                        <p class="text-gray-600">${property.price} - ${property.type} (${property.transaction})</p>
                        <p class="text-sm text-gray-500">${property.address}</p>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="editProperty(${property.id})" class="bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors text-base font-medium">
                            Editar
                        </button>
                        <button onclick="deleteProperty(${property.id})" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors text-base font-medium">
                            Excluir
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function editProperty(propertyId) {
            const property = properties.find(p => p.id === propertyId);
            if (!property) return;
            
            // Preencher o formul√°rio com os dados existentes
            document.getElementById('title').value = property.title;
            document.getElementById('price').value = property.price;
            document.getElementById('type').value = property.type;
            document.getElementById('transaction').value = property.transaction;
            document.getElementById('area').value = property.area;
            document.getElementById('bedrooms').value = property.bedrooms;
            document.getElementById('bathrooms').value = property.bathrooms;
            document.getElementById('parking').value = property.parking;
            document.getElementById('address').value = property.address;
            document.getElementById('description').value = property.description;
            
            // Preencher campos de √≠cones e textos personalizados
            document.getElementById('areaIcon').value = property.areaIcon || 'üìê';
            document.getElementById('areaText').value = property.areaText || 'm¬≤';
            document.getElementById('bedroomIcon').value = property.bedroomIcon || 'üõèÔ∏è';
            document.getElementById('bedroomText').value = property.bedroomText || '';
            document.getElementById('bathroomIcon').value = property.bathroomIcon || 'üöø';
            document.getElementById('bathroomText').value = property.bathroomText || '';
            document.getElementById('parkingIcon').value = property.parkingIcon || 'üöó';
            document.getElementById('parkingText').value = property.parkingText || '';
            
            // Mostrar fotos existentes
            const photoPreview = document.getElementById('photoPreview');
            photoPreview.innerHTML = '';
            currentPhotos = property.photos.slice(1); // Todas exceto a primeira (thumbnail)
            
            property.photos.slice(1).forEach((photo, index) => {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'relative';
                photoDiv.innerHTML = `
                    <img src="${photo}" alt="Foto ${index + 1}" class="w-full h-24 object-cover rounded-lg">
                    <button type="button" onclick="removePhoto(${index})" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">√ó</button>
                `;
                photoPreview.appendChild(photoDiv);
            });
            
            updatePhotoCount();
            
            // Mostrar thumbnail existente
            const thumbnailPreview = document.getElementById('thumbnailPreview');
            thumbnailPreview.innerHTML = `
                <div class="mt-2">
                    <img src="${property.photos[0]}" alt="Thumbnail Preview" class="w-32 h-24 object-cover rounded-lg border-2 border-blue-300">
                    <p class="text-sm text-green-600 mt-1">‚úì Foto principal carregada</p>
                </div>
            `;
            
            // Alterar o bot√£o de submit
            const submitBtn = document.querySelector('#propertyForm button[type="submit"]');
            submitBtn.textContent = 'Atualizar Im√≥vel';
            submitBtn.className = 'w-full bg-orange-600 text-white py-4 px-8 rounded-lg font-semibold hover:bg-orange-700 transition-colors text-lg';
            
            // Marcar como edi√ß√£o
            document.getElementById('propertyForm').dataset.editing = propertyId;
            
            // Scroll para o formul√°rio
            document.getElementById('propertyForm').scrollIntoView({ behavior: 'smooth' });
        }

        function deleteProperty(propertyId) {
            if (confirm('Tem certeza que deseja excluir este im√≥vel?')) {
                properties = properties.filter(p => p.id !== propertyId);
                loadAdminProperties();
                alert('Im√≥vel exclu√≠do com sucesso!');
            }
        }

        // Tracking functions
        function trackPropertyView(title, type, price) {
            // Facebook Pixel tracking
            if (typeof fbq !== 'undefined') {
                fbq('track', 'ViewContent', {
                    content_name: title,
                    content_category: type,
                    content_type: 'property',
                    value: parseFloat(price.replace(/[^\d,]/g, '').replace(',', '.')),
                    currency: 'BRL'
                });
            }
            
            // Google Analytics tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'view_item', {
                    'event_category': 'real_estate',
                    'event_label': title,
                    'item_name': title,
                    'item_category': type,
                    'value': parseFloat(price.replace(/[^\d,]/g, '').replace(',', '.'))
                });
            }
        }

        function trackContactClick() {
            // Facebook Pixel tracking
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Contact');
            }
            
            // Google Analytics tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'contact_click', {
                    'event_category': 'engagement',
                    'event_label': 'contact_button'
                });
            }
            
            // Abrir WhatsApp
            window.open('https://wa.me/5511999999999?text=Ol√°! Vi um im√≥vel no site e gostaria de mais informa√ß√µes.', '_blank');
        }

        function trackWhatsAppClick() {
            // Facebook Pixel tracking
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Contact', {
                    content_name: 'WhatsApp Contact'
                });
            }
            
            // Google Analytics tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'whatsapp_click', {
                    'event_category': 'engagement',
                    'event_label': 'whatsapp_button'
                });
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', async function() {
            // Verifica autentica√ß√£o
            await checkAdminLogin();
            
            // Check if there's a hash in URL
            const hash = window.location.hash.substring(1).split('?')[0];
            if (hash && ['home', 'casas', 'apartamentos', 'comercial', 'aluguel', 'venda', 'admin'].includes(hash)) {
                showSection(hash, false);
            } else {
                showSection('home', false);
            }
            
            // Set initial state
            history.replaceState({ section: hash || 'home' }, '', window.location.href);
        });

        // Close modal when clicking outside
        document.getElementById('propertyModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
